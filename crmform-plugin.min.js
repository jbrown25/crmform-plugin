if("undefined"==typeof jQuery)throw new Error("The CRM Form plugin requires jQuery");!function(e){"use strict";function t(e,t,a){var s="";switch(a.inputClass&&t.addClass(a.inputClass),a.style){case"placeholders":t.attr("placeholder",e.text()),s+='<div class="'+a.containerClass+'">',s+=t[0].outerHTML,s+="</div>";break;case"labels":s+='<div class="'+a.containerClass+'">',s+='<label class="inputLabel">'+e.text()+"</label>"+t[0].outerHTML,s+="</div>";break;default:t.attr("placeholder",e.text()),s+='<div class="'+a.containerClass+'">',s+=t[0].outerHTML,s+="</div>"}return s}function a(t){e('input[type="text"]').on("focus",function(){var a=e(this).parent("."+t),s=a.find("label");a.addClass("active"),s.addClass("active")}).on("focusout",function(){var a=e(this).parent("."+t);(a.removeClass("active"),""===e(this).val())&&a.find("label").removeClass("active")})}e.fn.CRMForm=function(s){var i,l,n,r,o,c,d,f,u=e.extend({style:"placeholders",containerClass:"form-control-container",checkboxContainerClass:"",inputClass:""},s),h=this.find("form.form").clone();try{var v=(i=u,c=[],e("form tr").each(function(){if(l=e(this),(n=l.find("div.fieldLabel")).length){if(r=e(this).find("input.field, select.fieldSelect, textarea.fieldComments"),n.hasClass("morelabel")&&c.push((m=n,b=containerClass,C="",C+='<div class="'+b.containerClass+'">',C+=m[0].outerHTML,C+="</div>")),r.length)if(r.filter("input.field").length){var a=r.filter("input.field").clone();c.push(t(n,a,i))}else if(r.filter("textarea.fieldComments").length){var s=r.filter("textarea.fieldComments").clone();c.push(t(n,s,i))}else if(r.filter("select.fieldSelect").length){var d=r.filter("select.fieldSelect").clone();c.push(function(e,t,a){var s="";a.inputClass&&t.addClass(a.inputClass);var i=t.attr("id");return i&&i.indexOf("birthday")>-1?(s+='<div class="'+a.containerClass+'">',s+='<label class="selectLabel">'+e.text()+"</label>",s+=t.filter("#birthday_month").addClass(a.inputClass)[0].outerHTML,s+="</div>",t.filter("#birthday_month").remove(),s+='<div class="'+a.containerClass+'">',s+=t.filter("#birthday_day").addClass(a.inputClass)[0].outerHTML,s+="</div>",t.filter("#birthday_day").remove(),s+='<div class="'+a.containerClass+'">',s+=t.filter("#birthday_year").addClass(a.inputClass)[0].outerHTML,s+="</div>",t.filter("#birthday_year").remove(),s+="</div>"):(s+='<div class="'+a.containerClass+'">',s+='<label class="selectLabel">'+e.text()+"</label>",s+=t[0].outerHTML,s+="</div>"),s}(n,d,i)),d.attr("id")&&d.attr("id").indexOf>-1&&(r.filter("#birthday_month").remove(),r.filter("#birthday_day").remove(),r.filter("#birthday_year").remove())}}else if(o=e(this).find("input.fieldCheckbox"),n=e(this).find(".checkLabel"),o.length)c.push((u=n,h=o,v=i,p="",u.length?(v.checkboxContainerClass?p+='<div class="'+v.checkboxContainerClass+'">':p+='<div class="'+v.containerClass+'">',p+=h[0].outerHTML,p+=u[0].outerHTML,p+="</div>"):(p+='<div class="'+v.containerClass+'">',p+=h[0].outerHTML,p+="</div>"),p));else{var f=l.find('td[colspan="2"]');("&nbsp;"===f.html()||f.find("div.fieldSpacer").length)&&c.push('<div class="formSpacer"></div>')}var u,h,v,p,m,b,C}),c.push((d=i.containerClass,f="",f+='<div class="'+d+'">',f+=e(".submitButton")[0].outerHTML,f+="</div>")),c.join(""))}catch(e){console.log(e)}return this.init=function(){return this.find("form.form").append(v),this.find("form table").remove(),"labels"===u.style&&a(u.containerClass),this},this.cloneForm=function(t){return void 0===t?(console.log("You must include a location to clone the form."),this):(e(t).append('<form class="cloneForm"></form>'),e(t).find("form.cloneForm").attr("method",h.attr("method")).attr("onsubmit",h.attr("onsubmit")).attr("name",h.attr("name")).attr("action",h.attr("action")).attr("class",h.attr("class")).append(e('form.form input[type="hidden"]').clone()).append(v),"labels"===u.style&&a(u.containerClass),s=u.containerClass,e('input[type="text"]').on("keyup",function(){var t=e(this).val(),a=e(this).attr("name"),i=e('input[type="text"][name="'+a+'"]');i.val(t);var l=i.parent("."+s),n=l.find("label");""!=t?(l.addClass("active"),n.addClass("active")):(l.removeClass("active"),n.removeClass("active"))}),e("textarea").on("keyup",function(){var t=e(this).val(),a=e(this).attr("name"),s=e('textarea[name="'+a+'"]');s.val(t)}),e('input[type = "checkbox"]').on("change",function(){var t=this.checked,a=e(this).attr("name"),s=e('input[type="checkbox"][name="'+a+'"]');s.prop("checked",t)}),e("select").on("change",function(){var t=e(this).val(),a=e(this).attr("name"),s=e('select[name="'+a+'"]');s.val(t)}),this);var s},this.init()};var s=e('span[id^="clickable"]');if(s.length){s.css("display","inline-block").css("width","100%").css("border","1px solid transparent").css("margin","-1px");var i=s.attr("onmouseout");i&&(i=(i=(i=i.replace("style.border = 'none';",'style.border="1px solid transparent";')).replace("style.margin = '0';",'style.margin="-1px";')).replace("style.display='inherit';",'style.display="inline-block";'),e('span[id^="clickable"]').attr("onmouseout",i),e('a span[id^="clickable"]').click(function(e){e.stopPropagation()}))}}(jQuery);var myForm=new Object;myForm.submit=function(){document.getElementsByClassName("form")[0].submit()};