if("undefined"==typeof jQuery)throw new Error("The CRM Form plugin requires jQuery");!function(e){"use strict";function t(t,r){var o,c,d,u,f=[];return e("form tr").each(function(){if(o=e(this),(c=o.find("div.fieldLabel")).length){if(d=e(this).find("input.field, select.fieldSelect, textarea.fieldComments"),c.hasClass("morelabel")&&f.push(a(c,containerClass)),d.length)if(d.filter("input.field").length){var t=d.filter("input.field").clone();f.push(i(c,t,r))}else if(d.filter("textarea.fieldComments").length){var l=d.filter("textarea.fieldComments").clone();f.push(i(c,l,r))}else if(d.filter("select.fieldSelect").length){var h=d.filter("select.fieldSelect").clone();f.push(s(c,h,r)),h.attr("id")&&h.attr("id").indexOf>-1&&(d.filter("#birthday_month").remove(),d.filter("#birthday_day").remove(),d.filter("#birthday_year").remove())}}else if(u=e(this).find("input.fieldCheckbox"),c=e(this).find(".checkLabel"),u.length)f.push(n(c,u,r));else{var v=o.find('td[colspan="2"]');("&nbsp;"===v.html()||v.find("div.fieldSpacer").length)&&f.push('<div class="formSpacer"></div>')}}),f.push(l(r.containerClass)),f.join()}function a(e,t){var a="";return a+='<div class="'+t.containerClass+'">',a+=e[0].outerHTML,a+="</div>"}function i(e,t,a){var i="";switch(a.inputClass&&t.addClass(a.inputClass),a.style){case"placeholders":theInputfield.attr("placeholder",e.text()),i+='<div class="'+a.containerClass+'">',i+=t[0].outerHTML,i+="</div>";break;case"labels":i+='<div class="'+a.containerClass+'">',i+='<label class="inputLabel">'+e.text()+"</label>"+t[0].outerHTML,i+="</div>";break;default:theInputfield.attr("placeholder",e.text()),i+='<div class="'+a.containerClass+'">',i+=t[0].outerHTML,i+="</div>"}return i}function s(e,t,a){var i="";a.inputClass&&t.addClass(a.inputClass);var s=t.attr("id");return s&&s.indexOf("birthday")>-1?(i+='<div class="'+a.containerClass+'">',i+='<label class="selectLabel">'+e.text()+"</label>",i+=t.filter("#birthday_month").addClass(a.inputClass)[0].outerHTML,i+="</div>",t.filter("#birthday_month").remove(),i+='<div class="'+a.containerClass+'">',i+=t.filter("#birthday_day").addClass(a.inputClass)[0].outerHTML,i+="</div>",t.filter("#birthday_day").remove(),i+='<div class="'+a.containerClass+'">',i+=t.filter("#birthday_year").addClass(a.inputClass)[0].outerHTML,i+="</div>",t.filter("#birthday_year").remove(),i+="</div>"):(i+='<div class="'+a.containerClass+'">',i+='<label class="selectLabel">'+e.text()+"</label>",i+=t[0].outerHTML,i+="</div>"),i}function n(e,t,a){var i="";return e.length?(a.checkboxContainerClass?i+='<div class="'+a.checkboxContainerClass+'">':i+='<div class="'+a.containerClass+'">',i+=t[0].outerHTML,i+=e[0].outerHTML,i+="</div>"):(i+='<div class="'+a.containerClass+'">',i+=t[0].outerHTML,i+="</div>"),i}function l(t){var a="";return a+='<div class="'+t+'">',a+=e(".submitButton")[0].outerHTML,a+="</div>"}function r(t){e('input[type="text"]').on("focus",function(){var a=e(this).parent("."+t),i=a.find("label");a.addClass("active"),i.addClass("active")}).on("focusout",function(){var a=e(this).parent("."+t);a.removeClass("active"),""===e(this).val()&&a.find("label").removeClass("active")})}function o(t){e('input[type="text"]').on("keyup",function(){var a=e(this).val(),i=e(this).attr("name"),s=e('input[type="text"][name="'+i+'"]');s.val(a);var n=s.parent("."+t),l=n.find("label");""!=a?(n.addClass("active"),l.addClass("active")):(n.removeClass("active"),l.removeClass("active"))}),e("textarea").on("keyup",function(){var t=e(this).val(),a=e(this).attr("name");e('textarea[name="'+a+'"]').val(t)}),e('input[type = "checkbox"]').on("change",function(){var t=this.checked,a=e(this).attr("name");e('input[type="checkbox"][name="'+a+'"]').prop("checked",t)}),e("select").on("change",function(){var t=e(this).val(),a=e(this).attr("name");e('select[name="'+a+'"]').val(t)})}e.fn.CRMForm=function(a){var i=e.extend({style:"placeholders",containerClass:"form-control-container",checkboxContainerClass:"",inputClass:""},a),s=this.find("form.form").clone();try{var n=t(s,i)}catch(e){console.log(e)}return this.init=function(){return this.find("form.form").append(n),this.find("form table").remove(),"labels"===i.style&&r(i.containerClass),this},this.cloneForm=function(t){return void 0===t?(console.log("You must include a location to clone the form."),this):(e(t).append('<form class="cloneForm"></form>'),e(t).find("form.cloneForm").attr("method",s.attr("method")).attr("onsubmit",s.attr("onsubmit")).attr("name",s.attr("name")).attr("action",s.attr("action")).attr("class",s.attr("class")).append(e('form.form input[type="hidden"]').clone()).append(n),"labels"===i.style&&r(i.containerClass),o(i.containerClass),this)},this.init()};var c=e('span[id^="clickable"]');if(c.length){c.css("display","inline-block").css("width","100%").css("border","1px solid transparent").css("margin","-1px");var d=c.attr("onmouseout");d&&(d=(d=(d=d.replace("style.border = 'none';",'style.border="1px solid transparent";')).replace("style.margin = '0';",'style.margin="-1px";')).replace("style.display='inherit';",'style.display="inline-block";'),e('span[id^="clickable"]').attr("onmouseout",d),e('a span[id^="clickable"]').click(function(e){e.stopPropagation()}))}}(jQuery);var myForm=new Object;myForm.submit=function(){document.getElementsByClassName("form")[0].submit()};
