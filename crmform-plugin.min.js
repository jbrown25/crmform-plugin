if("undefined"==typeof jQuery)throw new Error("The CRM Form plugin requires jQuery");!function(a){"use strict";function b(b,c,d,e,f){var h,i,j,k,g="";return a("form tr").each(function(){if(h=a(this),i=h.find("div.fieldLabel"),i.length){if(j=a(this).find("input.field, select.fieldSelect, textarea.fieldComments"),i.hasClass("morelabel")&&(g+='<div class="'+d+'">',g+=i[0].outerHTML,g+="</div>"),j.length)if(j.filter("input.field").length){var b=j.filter("input.field").clone();switch(f&&b.addClass(f),c){case"placeholders":b.attr("placeholder",i.text()),g+='<div class="'+d+'">',g+=b[0].outerHTML,g+="</div>";break;case"labels":g+='<div class="'+d+'">',g+='<label class="inputLabel">'+i.text()+"</label>"+b[0].outerHTML,g+="</div>";break;default:b.attr("placeholder",i.text()),g+='<div class="'+d+'">',g+=b[0].outerHTML,g+="</div>"}}else if(j.filter("textarea.fieldComments").length){var l=j.filter("textarea.fieldComments").clone();switch(f&&l.addClass(f),c){case"placeholders":l.attr("placeholder",i.text()),g+='<div class="'+d+'">',g+=l[0].outerHTML,g+="</div>";break;case"labels":g+='<div class="'+d+'">',g+='<label class="textareaLabel">'+i.text()+"</label>"+l[0].outerHTML,g+="</div>";break;default:l.attr("placeholder",i.text()),g+='<div class="'+d+'">',g+=l[0].outerHTML,g+="</div>"}}else if(j.filter("select.fieldSelect").length){var m=j.filter("select.fieldSelect").clone();f&&m.addClass(f);var n=m.attr("id");n&&n.indexOf("birthday")>-1?(g+='<div class="'+d+'">',g+='<label class="selectLabel">'+i.text()+"</label>",g+=j.filter("select#birthday_month").addClass(f)[0].outerHTML,g+="</div>",j.filter("select#birthday_month").remove(),g+='<div class="'+d+'">',g+=j.filter("select#birthday_day").addClass(f)[0].outerHTML,g+="</div>",j.filter("select#birthday_day").remove(),g+='<div class="'+d+'">',g+=j.filter("select#birthday_year").addClass(f)[0].outerHTML,g+="</div>",j.filter("select#birthday_year").remove(),g+="</div>"):(g+='<div class="'+d+'">',g+='<label class="selectLabel">'+i.text()+"</label>",g+=m[0].outerHTML,g+="</div>")}}else if(k=a(this).find("input.fieldCheckbox"),i=a(this).find(".checkLabel"),k.length)i.length?(g+=e?'<div class="'+e+'">':'<div class="'+d+'">',g+=k[0].outerHTML,g+=i[0].outerHTML,g+="</div>"):(g+='<div class="'+d+'">',g+=k[0].outerHTML,g+="</div>");else{var o=h.find('td[colspan="2"]');("&nbsp;"===o.html()||o.find("div.fieldSpacer").length)&&(g+='<div class="formSpacer"></div>')}}),g+='<div class="'+d+'">',g+=a(".submitButton")[0].outerHTML,g+="</div>"}function c(b){var c=a('input[type="text"]');c.on("focus",function(){var c=a(this).parent("."+b),d=c.find("label");c.addClass("active"),d.addClass("active")}).on("focusout",function(){var c=a(this).parent("."+b);if(c.removeClass("active"),""===a(this).val()){var d=c.find("label");d.removeClass("active")}})}function d(b){a('input[type="text"]').on("keyup",function(){var c=a(this).val(),d=a(this).attr("name"),e=a('input[type="text"][name="'+d+'"]');e.val(c);var f=e.parent("."+b),g=f.find("label");""!=c?(f.addClass("active"),g.addClass("active")):(f.removeClass("active"),g.removeClass("active"))}),a("textarea").on("keyup",function(){var b=a(this).val(),c=a(this).attr("name"),d=a('textarea[name="'+c+'"]');d.val(b)}),a('input[type = "checkbox"]').on("change",function(){var b=this.checked,c=a(this).attr("name"),d=a('input[type="checkbox"][name="'+c+'"]');d.prop("checked",b)}),a("select").on("change",function(){var b=a(this).val(),c=a(this).attr("name"),d=a('select[name="'+c+'"]');d.val(b)})}a.fn.CRMForm=function(e){var f=a.extend({style:"placeholders",containerClass:"form-control-container",checkboxContainerClass:"",inputClass:""},e),g=this.find("form.form").clone();try{var h=b(g,f.style,f.containerClass,f.checkboxContainerClass,f.inputClass)}catch(a){console.log(a)}return this.init=function(){return this.find("form.form").append(h),this.find("form table").remove(),"labels"===f.style&&c(f.containerClass),this},this.cloneForm=function(b){return"undefined"==typeof b?(console.log("You must include a location to clone the form."),this):(a(b).append('<form class="cloneForm"></form>'),a(b).find("form.cloneForm").attr("method",g.attr("method")).attr("onsubmit",g.attr("onsubmit")).attr("name",g.attr("name")).attr("action",g.attr("action")).attr("class",g.attr("class")).append(a('form.form input[type="hidden"]').clone()).append(h),"labels"===f.style&&c(f.containerClass),d(f.containerClass),this)},this.init()};var e=a('span[id^="clickable"]');if(e.length){e.css("display","inline-block").css("width","100%").css("border","1px solid transparent").css("margin","-1px");var f=e.attr("onmouseout");f&&(f=f.replace("style.border = 'none';",'style.border="1px solid transparent";'),f=f.replace("style.margin = '0';",'style.margin="-1px";'),f=f.replace("style.display='inherit';",'style.display="inline-block";'),a('span[id^="clickable"]').attr("onmouseout",f),a('a span[id^="clickable"]').click(function(a){a.stopPropagation()}),a('button span[id^="clickable"]').click(function(a){a.stopPropagation()}))}}(jQuery);var myForm=new Object;myForm.submit=function(){document.getElementsByClassName("form")[0].submit()};
